<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Modality.Context</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Pragma">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="61" class="Keyword">open</a> <a id="66" class="Keyword">import</a> <a id="73" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="88" class="Keyword">open</a> <a id="93" class="Keyword">import</a> <a id="100" href="Definition.Modality.html" class="Module">Definition.Modality</a>

<a id="121" class="Keyword">module</a> <a id="128" href="Definition.Modality.Context.html" class="Module">Definition.Modality.Context</a> <a id="156" class="Symbol">{</a><a id="157" href="Definition.Modality.Context.html#157" class="Bound">a</a> <a id="159" href="Definition.Modality.Context.html#159" class="Bound">ℓ</a><a id="160" class="Symbol">}</a>
       <a id="169" class="Symbol">{</a><a id="170" href="Definition.Modality.Context.html#170" class="Bound">M′</a> <a id="173" class="Symbol">:</a> <a id="175" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="182" href="Definition.Modality.Context.html#157" class="Bound">a</a> <a id="184" href="Definition.Modality.Context.html#159" class="Bound">ℓ</a><a id="185" class="Symbol">}</a> <a id="187" class="Symbol">(</a><a id="188" href="Definition.Modality.Context.html#188" class="Bound">𝕄</a> <a id="190" class="Symbol">:</a> <a id="192" href="Definition.Modality.html#305" class="Record">Modality</a> <a id="201" href="Definition.Modality.Context.html#170" class="Bound">M′</a><a id="203" class="Symbol">)</a>
       <a id="212" class="Keyword">where</a>

<a id="219" class="Keyword">open</a> <a id="224" href="Definition.Modality.html#305" class="Module">Modality</a> <a id="233" href="Definition.Modality.Context.html#188" class="Bound">𝕄</a>
<a id="235" class="Keyword">open</a> <a id="240" href="Relation.Binary.Bundles.html#1009" class="Module">Setoid</a> <a id="247" href="Definition.Modality.Context.html#170" class="Bound">M′</a> <a id="250" class="Keyword">renaming</a> <a id="259" class="Symbol">(</a><a id="260" href="Relation.Binary.Bundles.html#1072" class="Field">Carrier</a> <a id="268" class="Symbol">to</a> <a id="271" class="Field">M</a><a id="272" class="Symbol">)</a>

<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="297" class="Keyword">open</a> <a id="302" class="Keyword">import</a> <a id="309" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="319" class="Keyword">renaming</a> <a id="328" class="Symbol">(</a><a id="329" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a> <a id="333" class="Symbol">to</a> <a id="336" class="Primitive Operator">_+ⁿ_</a><a id="340" class="Symbol">)</a>

<a id="343" class="Keyword">infixl</a> <a id="350" class="Number">30</a> <a id="353" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">_∙_</a>
<a id="357" class="Keyword">infixr</a> <a id="364" class="Number">40</a> <a id="367" href="Definition.Modality.Context.html#1355" class="Function Operator">_+ᶜ_</a>
<a id="372" class="Keyword">infixr</a> <a id="379" class="Number">40</a> <a id="382" href="Definition.Modality.Context.html#1475" class="Function Operator">_∧ᶜ_</a>
<a id="387" class="Keyword">infixr</a> <a id="394" class="Number">45</a> <a id="397" href="Definition.Modality.Context.html#1587" class="Function Operator">_·ᶜ_</a>
<a id="402" class="Keyword">infixr</a> <a id="409" class="Number">45</a> <a id="412" href="Definition.Modality.Context.html#1244" class="Function Operator">_*_</a>
<a id="416" class="Keyword">infix</a>  <a id="423" class="Number">10</a> <a id="426" href="Definition.Modality.Context.html#1709" class="Function Operator">_≤ᶜ_</a>
<a id="431" class="Keyword">infix</a>  <a id="438" class="Number">35</a> <a id="441" href="Definition.Modality.Context.html#961" class="Function Operator">_,_≔_</a>
<a id="447" class="Keyword">infix</a>  <a id="454" class="Number">60</a> <a id="457" href="Definition.Modality.Context.html#1116" class="Function Operator">_⟨_⟩</a>

<a id="463" class="Keyword">private</a>
  <a id="473" class="Keyword">variable</a>
    <a id="486" href="Definition.Modality.Context.html#486" class="Generalizable">m</a> <a id="488" href="Definition.Modality.Context.html#488" class="Generalizable">n</a> <a id="490" class="Symbol">:</a> <a id="492" href="Agda.Builtin.Nat.html#192" class="Datatype">Nat</a>


<a id="498" class="Comment">-- Modality Contexts are snoc-lists</a>

<a id="535" class="Keyword">data</a> <a id="Conₘ"></a><a id="594"></a><a id="540" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="545" class="Symbol">:</a> <a id="547" href="Agda.Builtin.Nat.html#192" class="Datatype">Nat</a> <a id="551" class="Symbol">→</a> <a id="553" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="557" href="Definition.Modality.Context.html#157" class="Bound">a</a> <a id="559" class="Keyword">where</a>
  <a id="Conₘ.ε"></a><a id="567" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>   <a id="571" class="Symbol">:</a> <a id="573" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="578" class="Number">0</a>
  <a id="Conₘ._∙_"></a><a id="582" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">_∙_</a> <a id="586" class="Symbol">:</a> <a id="588" class="Symbol">(</a><a id="589" href="Definition.Modality.Context.html#589" class="Bound">γ</a> <a id="591" class="Symbol">:</a> <a id="593" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="598" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="599" class="Symbol">)</a> <a id="601" class="Symbol">→</a> <a id="603" class="Symbol">(</a><a id="604" href="Definition.Modality.Context.html#604" class="Bound">p</a> <a id="606" class="Symbol">:</a> <a id="608" href="Definition.Modality.Context.html#271" class="Function">M</a><a id="609" class="Symbol">)</a> <a id="611" class="Symbol">→</a> <a id="613" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="618" class="Symbol">(</a><a id="619" href="Tools.Nat.html#365" class="InductiveConstructor">1+</a> <a id="622" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="623" class="Symbol">)</a>

<a id="626" class="Comment">-- Modality equality lifted pointwise to contexts</a>

<a id="677" class="Keyword">data</a> <a id="_≈ᶜ_"></a><a id="682" href="Definition.Modality.Context.html#682" class="Datatype Operator">_≈ᶜ_</a> <a id="687" class="Symbol">:</a> <a id="689" class="Symbol">(</a><a id="690" href="Definition.Modality.Context.html#690" class="Bound">γ</a> <a id="692" href="Definition.Modality.Context.html#692" class="Bound">δ</a> <a id="694" class="Symbol">:</a> <a id="696" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="701" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="702" class="Symbol">)</a> <a id="704" class="Symbol">→</a> <a id="706" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="710" class="Symbol">(</a><a id="711" href="Definition.Modality.Context.html#157" class="Bound">a</a> <a id="713" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="715" href="Definition.Modality.Context.html#159" class="Bound">ℓ</a><a id="716" class="Symbol">)</a> <a id="718" class="Keyword">where</a>
  <a id="_≈ᶜ_.ε"></a><a id="726" href="Definition.Modality.Context.html#726" class="InductiveConstructor">ε</a> <a id="728" class="Symbol">:</a> <a id="730" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="732" href="Definition.Modality.Context.html#682" class="Datatype Operator">≈ᶜ</a> <a id="735" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
  <a id="_≈ᶜ_._∙_"></a><a id="739" href="Definition.Modality.Context.html#739" class="InductiveConstructor Operator">_∙_</a> <a id="743" class="Symbol">:</a> <a id="745" class="Symbol">{</a><a id="746" href="Definition.Modality.Context.html#746" class="Bound">γ</a> <a id="748" href="Definition.Modality.Context.html#748" class="Bound">δ</a> <a id="750" class="Symbol">:</a> <a id="752" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="757" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="758" class="Symbol">}</a> <a id="760" class="Symbol">{</a><a id="761" href="Definition.Modality.Context.html#761" class="Bound">p</a> <a id="763" href="Definition.Modality.Context.html#763" class="Bound">q</a> <a id="765" class="Symbol">:</a> <a id="767" href="Definition.Modality.Context.html#271" class="Function">M</a><a id="768" class="Symbol">}</a> <a id="770" class="Symbol">→</a> <a id="772" href="Definition.Modality.Context.html#746" class="Bound">γ</a> <a id="774" href="Definition.Modality.Context.html#682" class="Datatype Operator">≈ᶜ</a> <a id="777" href="Definition.Modality.Context.html#748" class="Bound">δ</a> <a id="779" class="Symbol">→</a> <a id="781" href="Definition.Modality.Context.html#761" class="Bound">p</a> <a id="783" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="785" href="Definition.Modality.Context.html#763" class="Bound">q</a> <a id="787" class="Symbol">→</a> <a id="789" class="Symbol">(</a><a id="790" href="Definition.Modality.Context.html#746" class="Bound">γ</a> <a id="792" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="794" href="Definition.Modality.Context.html#761" class="Bound">p</a><a id="795" class="Symbol">)</a> <a id="797" href="Definition.Modality.Context.html#682" class="Datatype Operator">≈ᶜ</a> <a id="800" class="Symbol">(</a><a id="801" href="Definition.Modality.Context.html#748" class="Bound">δ</a> <a id="803" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="805" href="Definition.Modality.Context.html#763" class="Bound">q</a><a id="806" class="Symbol">)</a>


<a id="headₘ"></a><a id="810" href="Definition.Modality.Context.html#810" class="Function">headₘ</a> <a id="816" class="Symbol">:</a> <a id="818" class="Symbol">(</a><a id="819" href="Definition.Modality.Context.html#819" class="Bound">γ</a> <a id="821" class="Symbol">:</a> <a id="823" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="828" class="Symbol">(</a><a id="829" href="Tools.Nat.html#365" class="InductiveConstructor">1+</a> <a id="832" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="833" class="Symbol">))</a> <a id="836" class="Symbol">→</a> <a id="838" href="Definition.Modality.Context.html#271" class="Function">M</a>
<a id="840" href="Definition.Modality.Context.html#810" class="Function">headₘ</a> <a id="846" class="Symbol">(</a><a id="847" href="Definition.Modality.Context.html#847" class="Bound">γ</a> <a id="849" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="851" href="Definition.Modality.Context.html#851" class="Bound">p</a><a id="852" class="Symbol">)</a> <a id="854" class="Symbol">=</a> <a id="856" href="Definition.Modality.Context.html#851" class="Bound">p</a>

<a id="tailₘ"></a><a id="859" href="Definition.Modality.Context.html#859" class="Function">tailₘ</a> <a id="865" class="Symbol">:</a> <a id="867" class="Symbol">(</a><a id="868" href="Definition.Modality.Context.html#868" class="Bound">γ</a> <a id="870" class="Symbol">:</a> <a id="872" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="877" class="Symbol">(</a><a id="878" href="Tools.Nat.html#365" class="InductiveConstructor">1+</a> <a id="881" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="882" class="Symbol">))</a> <a id="885" class="Symbol">→</a> <a id="887" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="892" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="894" href="Definition.Modality.Context.html#859" class="Function">tailₘ</a> <a id="900" class="Symbol">(</a><a id="901" href="Definition.Modality.Context.html#901" class="Bound">γ</a> <a id="903" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="905" href="Definition.Modality.Context.html#905" class="Bound">p</a><a id="906" class="Symbol">)</a> <a id="908" class="Symbol">=</a> <a id="910" href="Definition.Modality.Context.html#901" class="Bound">γ</a>

<a id="913" class="Comment">-- Update the value of an element in a context</a>

<a id="_,_≔_"></a><a id="961" href="Definition.Modality.Context.html#961" class="Function Operator">_,_≔_</a> <a id="967" class="Symbol">:</a> <a id="969" class="Symbol">(</a><a id="970" href="Definition.Modality.Context.html#970" class="Bound">γ</a> <a id="972" class="Symbol">:</a> <a id="974" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="979" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="980" class="Symbol">)</a> <a id="982" class="Symbol">(</a><a id="983" href="Definition.Modality.Context.html#983" class="Bound">x</a> <a id="985" class="Symbol">:</a> <a id="987" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="991" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="992" class="Symbol">)</a> <a id="994" class="Symbol">(</a><a id="995" href="Definition.Modality.Context.html#995" class="Bound">p</a> <a id="997" class="Symbol">:</a> <a id="999" href="Definition.Modality.Context.html#271" class="Function">M</a><a id="1000" class="Symbol">)</a> <a id="1002" class="Symbol">→</a> <a id="1004" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1009" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1011" class="Symbol">(</a><a id="1012" href="Definition.Modality.Context.html#1012" class="Bound">γ</a> <a id="1014" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1016" href="Definition.Modality.Context.html#1016" class="Bound">q</a><a id="1017" class="Symbol">)</a> <a id="1019" href="Definition.Modality.Context.html#961" class="Function Operator">,</a> <a id="1021" href="Data.Fin.Base.html#1148" class="InductiveConstructor">x0</a>     <a id="1028" href="Definition.Modality.Context.html#961" class="Function Operator">≔</a> <a id="1030" href="Definition.Modality.Context.html#1030" class="Bound">p</a> <a id="1032" class="Symbol">=</a> <a id="1034" href="Definition.Modality.Context.html#1012" class="Bound">γ</a> <a id="1036" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1038" href="Definition.Modality.Context.html#1030" class="Bound">p</a>
<a id="1040" class="Symbol">(</a><a id="1041" href="Definition.Modality.Context.html#1041" class="Bound">γ</a> <a id="1043" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1045" href="Definition.Modality.Context.html#1045" class="Bound">q</a><a id="1046" class="Symbol">)</a> <a id="1048" href="Definition.Modality.Context.html#961" class="Function Operator">,</a> <a id="1050" class="Symbol">(</a><a id="1051" href="Definition.Modality.Context.html#1051" class="Bound">x</a> <a id="1053" href="Data.Fin.Base.html#1179" class="InductiveConstructor Operator">+1</a><a id="1055" class="Symbol">)</a> <a id="1057" href="Definition.Modality.Context.html#961" class="Function Operator">≔</a> <a id="1059" href="Definition.Modality.Context.html#1059" class="Bound">p</a> <a id="1061" class="Symbol">=</a> <a id="1063" class="Symbol">(</a><a id="1064" href="Definition.Modality.Context.html#1041" class="Bound">γ</a> <a id="1066" href="Definition.Modality.Context.html#961" class="Function Operator">,</a> <a id="1068" href="Definition.Modality.Context.html#1051" class="Bound">x</a> <a id="1070" href="Definition.Modality.Context.html#961" class="Function Operator">≔</a> <a id="1072" href="Definition.Modality.Context.html#1059" class="Bound">p</a><a id="1073" class="Symbol">)</a> <a id="1075" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1077" href="Definition.Modality.Context.html#1045" class="Bound">q</a>

<a id="1080" class="Comment">-- Look up an element in a context</a>

<a id="_⟨_⟩"></a><a id="1116" href="Definition.Modality.Context.html#1116" class="Function Operator">_⟨_⟩</a> <a id="1121" class="Symbol">:</a> <a id="1123" class="Symbol">(</a><a id="1124" href="Definition.Modality.Context.html#1124" class="Bound">γ</a> <a id="1126" class="Symbol">:</a> <a id="1128" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1133" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1134" class="Symbol">)</a> <a id="1136" class="Symbol">→</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Definition.Modality.Context.html#1139" class="Bound">x</a> <a id="1141" class="Symbol">:</a> <a id="1143" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1147" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1148" class="Symbol">)</a> <a id="1150" class="Symbol">→</a> <a id="1152" href="Definition.Modality.Context.html#271" class="Function">M</a>
<a id="1154" class="Symbol">(</a><a id="1155" href="Definition.Modality.Context.html#1155" class="Bound">γ</a> <a id="1157" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1159" href="Definition.Modality.Context.html#1159" class="Bound">p</a><a id="1160" class="Symbol">)</a> <a id="1162" href="Definition.Modality.Context.html#1116" class="Function Operator">⟨</a> <a id="1164" href="Data.Fin.Base.html#1148" class="InductiveConstructor">x0</a> <a id="1167" href="Definition.Modality.Context.html#1116" class="Function Operator">⟩</a>   <a id="1171" class="Symbol">=</a> <a id="1173" href="Definition.Modality.Context.html#1159" class="Bound">p</a>
<a id="1175" class="Symbol">(</a><a id="1176" href="Definition.Modality.Context.html#1176" class="Bound">γ</a> <a id="1178" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1180" href="Definition.Modality.Context.html#1180" class="Bound">p</a><a id="1181" class="Symbol">)</a> <a id="1183" href="Definition.Modality.Context.html#1116" class="Function Operator">⟨</a> <a id="1185" href="Definition.Modality.Context.html#1185" class="Bound">x</a> <a id="1187" href="Data.Fin.Base.html#1179" class="InductiveConstructor Operator">+1</a> <a id="1190" href="Definition.Modality.Context.html#1116" class="Function Operator">⟩</a> <a id="1192" class="Symbol">=</a> <a id="1194" href="Definition.Modality.Context.html#1176" class="Bound">γ</a> <a id="1196" href="Definition.Modality.Context.html#1116" class="Function Operator">⟨</a> <a id="1198" href="Definition.Modality.Context.html#1185" class="Bound">x</a> <a id="1200" href="Definition.Modality.Context.html#1116" class="Function Operator">⟩</a>


<a id="1204" class="Comment">-- Scalar product of modality contexts</a>

<a id="_*_"></a><a id="1244" href="Definition.Modality.Context.html#1244" class="Function Operator">_*_</a> <a id="1248" class="Symbol">:</a> <a id="1250" class="Symbol">(</a><a id="1251" href="Definition.Modality.Context.html#1251" class="Bound">γ</a> <a id="1253" href="Definition.Modality.Context.html#1253" class="Bound">δ</a> <a id="1255" class="Symbol">:</a> <a id="1257" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1262" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1263" class="Symbol">)</a> <a id="1265" class="Symbol">→</a> <a id="1267" href="Definition.Modality.Context.html#271" class="Function">M</a>
<a id="1269" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1271" href="Definition.Modality.Context.html#1244" class="Function Operator">*</a> <a id="1273" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1275" class="Symbol">=</a> <a id="1277" href="Definition.Modality.html#687" class="Field">𝟘</a>
<a id="1279" class="Symbol">(</a><a id="1280" href="Definition.Modality.Context.html#1280" class="Bound">γ</a> <a id="1282" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1284" href="Definition.Modality.Context.html#1284" class="Bound">p</a><a id="1285" class="Symbol">)</a> <a id="1287" href="Definition.Modality.Context.html#1244" class="Function Operator">*</a> <a id="1289" class="Symbol">(</a><a id="1290" href="Definition.Modality.Context.html#1290" class="Bound">δ</a> <a id="1292" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1294" href="Definition.Modality.Context.html#1294" class="Bound">q</a><a id="1295" class="Symbol">)</a> <a id="1297" class="Symbol">=</a> <a id="1299" href="Definition.Modality.Context.html#1280" class="Bound">γ</a> <a id="1301" href="Definition.Modality.Context.html#1244" class="Function Operator">*</a> <a id="1303" href="Definition.Modality.Context.html#1290" class="Bound">δ</a> <a id="1305" href="Definition.Modality.html#482" class="Field Operator">+</a> <a id="1307" href="Definition.Modality.Context.html#1284" class="Bound">p</a> <a id="1309" href="Definition.Modality.html#510" class="Field Operator">·</a> <a id="1311" href="Definition.Modality.Context.html#1294" class="Bound">q</a>

<a id="1314" class="Comment">-- Addition lifted to modality contexts</a>

<a id="_+ᶜ_"></a><a id="1355" href="Definition.Modality.Context.html#1355" class="Function Operator">_+ᶜ_</a> <a id="1360" class="Symbol">:</a> <a id="1362" class="Symbol">(</a><a id="1363" href="Definition.Modality.Context.html#1363" class="Bound">γ</a> <a id="1365" href="Definition.Modality.Context.html#1365" class="Bound">δ</a> <a id="1367" class="Symbol">:</a> <a id="1369" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1374" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1375" class="Symbol">)</a> <a id="1377" class="Symbol">→</a> <a id="1379" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1384" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1386" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1388" href="Definition.Modality.Context.html#1355" class="Function Operator">+ᶜ</a> <a id="1391" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1393" class="Symbol">=</a> <a id="1395" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="1397" class="Symbol">(</a><a id="1398" href="Definition.Modality.Context.html#1398" class="Bound">γ</a> <a id="1400" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1402" href="Definition.Modality.Context.html#1402" class="Bound">p</a><a id="1403" class="Symbol">)</a> <a id="1405" href="Definition.Modality.Context.html#1355" class="Function Operator">+ᶜ</a> <a id="1408" class="Symbol">(</a><a id="1409" href="Definition.Modality.Context.html#1409" class="Bound">δ</a> <a id="1411" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1413" href="Definition.Modality.Context.html#1413" class="Bound">q</a><a id="1414" class="Symbol">)</a> <a id="1416" class="Symbol">=</a> <a id="1418" class="Symbol">(</a><a id="1419" href="Definition.Modality.Context.html#1398" class="Bound">γ</a> <a id="1421" href="Definition.Modality.Context.html#1355" class="Function Operator">+ᶜ</a> <a id="1424" href="Definition.Modality.Context.html#1409" class="Bound">δ</a><a id="1425" class="Symbol">)</a> <a id="1427" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1429" class="Symbol">(</a><a id="1430" href="Definition.Modality.Context.html#1402" class="Bound">p</a> <a id="1432" href="Definition.Modality.html#482" class="Field Operator">+</a> <a id="1434" href="Definition.Modality.Context.html#1413" class="Bound">q</a><a id="1435" class="Symbol">)</a>

<a id="1438" class="Comment">-- Meet lifted to modality contexts</a>

<a id="_∧ᶜ_"></a><a id="1475" href="Definition.Modality.Context.html#1475" class="Function Operator">_∧ᶜ_</a> <a id="1480" class="Symbol">:</a> <a id="1482" class="Symbol">(</a><a id="1483" href="Definition.Modality.Context.html#1483" class="Bound">γ</a> <a id="1485" href="Definition.Modality.Context.html#1485" class="Bound">δ</a> <a id="1487" class="Symbol">:</a> <a id="1489" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1494" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1495" class="Symbol">)</a> <a id="1497" class="Symbol">→</a> <a id="1499" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1504" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1506" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1508" href="Definition.Modality.Context.html#1475" class="Function Operator">∧ᶜ</a> <a id="1511" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1513" class="Symbol">=</a> <a id="1515" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="1517" class="Symbol">(</a><a id="1518" href="Definition.Modality.Context.html#1518" class="Bound">γ</a> <a id="1520" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1522" href="Definition.Modality.Context.html#1522" class="Bound">p</a><a id="1523" class="Symbol">)</a> <a id="1525" href="Definition.Modality.Context.html#1475" class="Function Operator">∧ᶜ</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Definition.Modality.Context.html#1529" class="Bound">δ</a> <a id="1531" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1533" href="Definition.Modality.Context.html#1533" class="Bound">q</a><a id="1534" class="Symbol">)</a> <a id="1536" class="Symbol">=</a> <a id="1538" class="Symbol">(</a><a id="1539" href="Definition.Modality.Context.html#1518" class="Bound">γ</a> <a id="1541" href="Definition.Modality.Context.html#1475" class="Function Operator">∧ᶜ</a> <a id="1544" href="Definition.Modality.Context.html#1529" class="Bound">δ</a><a id="1545" class="Symbol">)</a> <a id="1547" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1549" class="Symbol">(</a><a id="1550" href="Definition.Modality.Context.html#1522" class="Bound">p</a> <a id="1552" href="Definition.Modality.html#544" class="Field Operator">∧</a> <a id="1554" href="Definition.Modality.Context.html#1533" class="Bound">q</a><a id="1555" class="Symbol">)</a>

<a id="1558" class="Comment">-- Modality context scaling</a>

<a id="_·ᶜ_"></a><a id="1587" href="Definition.Modality.Context.html#1587" class="Function Operator">_·ᶜ_</a> <a id="1592" class="Symbol">:</a> <a id="1594" class="Symbol">(</a><a id="1595" href="Definition.Modality.Context.html#1595" class="Bound">p</a> <a id="1597" class="Symbol">:</a> <a id="1599" href="Definition.Modality.Context.html#271" class="Function">M</a><a id="1600" class="Symbol">)</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Definition.Modality.Context.html#1603" class="Bound">γ</a> <a id="1605" class="Symbol">:</a> <a id="1607" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1612" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1613" class="Symbol">)</a> <a id="1615" class="Symbol">→</a> <a id="1617" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1622" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1624" href="Definition.Modality.Context.html#1624" class="Bound">p</a> <a id="1626" href="Definition.Modality.Context.html#1587" class="Function Operator">·ᶜ</a> <a id="1629" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1631" class="Symbol">=</a> <a id="1633" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="1635" href="Definition.Modality.Context.html#1635" class="Bound">p</a> <a id="1637" href="Definition.Modality.Context.html#1587" class="Function Operator">·ᶜ</a> <a id="1640" class="Symbol">(</a><a id="1641" href="Definition.Modality.Context.html#1641" class="Bound">γ</a> <a id="1643" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1645" href="Definition.Modality.Context.html#1645" class="Bound">q</a><a id="1646" class="Symbol">)</a> <a id="1648" class="Symbol">=</a> <a id="1650" class="Symbol">(</a><a id="1651" href="Definition.Modality.Context.html#1635" class="Bound">p</a> <a id="1653" href="Definition.Modality.Context.html#1587" class="Function Operator">·ᶜ</a> <a id="1656" href="Definition.Modality.Context.html#1641" class="Bound">γ</a><a id="1657" class="Symbol">)</a> <a id="1659" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1661" class="Symbol">(</a><a id="1662" href="Definition.Modality.Context.html#1635" class="Bound">p</a> <a id="1664" href="Definition.Modality.html#510" class="Field Operator">·</a> <a id="1666" href="Definition.Modality.Context.html#1645" class="Bound">q</a><a id="1667" class="Symbol">)</a>

<a id="1670" class="Comment">-- Partial order of modality contexts</a>

<a id="_≤ᶜ_"></a><a id="1967"></a><a id="1709" href="Definition.Modality.Context.html#1709" class="Function Operator">_≤ᶜ_</a> <a id="1714" class="Symbol">:</a> <a id="1716" class="Symbol">(</a><a id="1717" href="Definition.Modality.Context.html#1717" class="Bound">γ</a> <a id="1719" href="Definition.Modality.Context.html#1719" class="Bound">δ</a> <a id="1721" class="Symbol">:</a> <a id="1723" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1728" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1729" class="Symbol">)</a> <a id="1731" class="Symbol">→</a> <a id="1733" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1737" class="Symbol">(</a><a id="1738" href="Definition.Modality.Context.html#157" class="Bound">a</a> <a id="1740" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1742" href="Definition.Modality.Context.html#159" class="Bound">ℓ</a><a id="1743" class="Symbol">)</a>
<a id="1745" href="Definition.Modality.Context.html#1745" class="Bound">γ</a> <a id="1747" href="Definition.Modality.Context.html#1709" class="Function Operator">≤ᶜ</a> <a id="1750" href="Definition.Modality.Context.html#1750" class="Bound">δ</a> <a id="1752" class="Symbol">=</a> <a id="1754" href="Definition.Modality.Context.html#1745" class="Bound">γ</a> <a id="1756" href="Definition.Modality.Context.html#682" class="Datatype Operator">≈ᶜ</a> <a id="1759" href="Definition.Modality.Context.html#1745" class="Bound">γ</a> <a id="1761" href="Definition.Modality.Context.html#1475" class="Function Operator">∧ᶜ</a> <a id="1764" href="Definition.Modality.Context.html#1750" class="Bound">δ</a>

<a id="1767" class="Comment">-- nr-recurrence relation lifted to modality contexts</a>

<a id="nrᶜ"></a><a id="1822" href="Definition.Modality.Context.html#1822" class="Function">nrᶜ</a> <a id="1826" class="Symbol">:</a> <a id="1828" class="Symbol">(</a><a id="1829" href="Definition.Modality.Context.html#1829" class="Bound">γ</a> <a id="1831" href="Definition.Modality.Context.html#1831" class="Bound">δ</a> <a id="1833" class="Symbol">:</a> <a id="1835" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1840" href="Definition.Modality.Context.html#488" class="Generalizable">n</a><a id="1841" class="Symbol">)</a> <a id="1843" class="Symbol">(</a><a id="1844" href="Definition.Modality.Context.html#1844" class="Bound">r</a> <a id="1846" class="Symbol">:</a> <a id="1848" href="Definition.Modality.Context.html#271" class="Function">M</a><a id="1849" class="Symbol">)</a> <a id="1851" class="Symbol">→</a> <a id="1853" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1858" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1860" href="Definition.Modality.Context.html#1822" class="Function">nrᶜ</a> <a id="1864" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1866" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a> <a id="1868" href="Definition.Modality.Context.html#1868" class="Bound">r</a> <a id="1870" class="Symbol">=</a> <a id="1872" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="1874" href="Definition.Modality.Context.html#1822" class="Function">nrᶜ</a> <a id="1878" class="Symbol">(</a><a id="1879" href="Definition.Modality.Context.html#1879" class="Bound">γ</a> <a id="1881" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1883" href="Definition.Modality.Context.html#1883" class="Bound">p</a><a id="1884" class="Symbol">)</a> <a id="1886" class="Symbol">(</a><a id="1887" href="Definition.Modality.Context.html#1887" class="Bound">δ</a> <a id="1889" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1891" href="Definition.Modality.Context.html#1891" class="Bound">q</a><a id="1892" class="Symbol">)</a> <a id="1894" href="Definition.Modality.Context.html#1894" class="Bound">r</a> <a id="1896" class="Symbol">=</a> <a id="1898" class="Symbol">(</a><a id="1899" href="Definition.Modality.Context.html#1822" class="Function">nrᶜ</a> <a id="1903" href="Definition.Modality.Context.html#1879" class="Bound">γ</a> <a id="1905" href="Definition.Modality.Context.html#1887" class="Bound">δ</a> <a id="1907" href="Definition.Modality.Context.html#1894" class="Bound">r</a><a id="1908" class="Symbol">)</a> <a id="1910" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1912" href="Definition.Modality.html#1980" class="Function">nr</a> <a id="1915" href="Definition.Modality.Context.html#1883" class="Bound">p</a> <a id="1917" href="Definition.Modality.Context.html#1891" class="Bound">q</a> <a id="1919" href="Definition.Modality.Context.html#1894" class="Bound">r</a>

<a id="1922" class="Comment">-- Zero modality context</a>

<a id="𝟘ᶜ"></a><a id="1948" href="Definition.Modality.Context.html#1948" class="Function">𝟘ᶜ</a> <a id="1951" class="Symbol">:</a> <a id="1953" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="1958" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="1960" href="Definition.Modality.Context.html#1948" class="Function">𝟘ᶜ</a> <a id="1963" class="Symbol">{</a><a id="1964" class="Argument">n</a> <a id="1966" class="Symbol">=</a> <a id="1968" class="Number">0</a><a id="1969" class="Symbol">}</a>    <a id="1974" class="Symbol">=</a> <a id="1976" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="1978" href="Definition.Modality.Context.html#1948" class="Function">𝟘ᶜ</a> <a id="1981" class="Symbol">{</a><a id="1982" class="Argument">n</a> <a id="1984" class="Symbol">=</a> <a id="1986" href="Tools.Nat.html#365" class="InductiveConstructor">1+</a> <a id="1989" href="Definition.Modality.Context.html#1989" class="Bound">n</a><a id="1990" class="Symbol">}</a> <a id="1992" class="Symbol">=</a> <a id="1994" href="Definition.Modality.Context.html#1948" class="Function">𝟘ᶜ</a> <a id="1997" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="1999" href="Definition.Modality.html#687" class="Field">𝟘</a>

<a id="2002" class="Comment">-- Unit modality context</a>

<a id="𝟙ᶜ"></a><a id="2028" href="Definition.Modality.Context.html#2028" class="Function">𝟙ᶜ</a> <a id="2031" class="Symbol">:</a> <a id="2033" href="Definition.Modality.Context.html#540" class="Datatype">Conₘ</a> <a id="2038" href="Definition.Modality.Context.html#488" class="Generalizable">n</a>
<a id="2040" href="Definition.Modality.Context.html#2028" class="Function">𝟙ᶜ</a> <a id="2043" class="Symbol">{</a><a id="2044" class="Argument">n</a> <a id="2046" class="Symbol">=</a> <a id="2048" class="Number">0</a><a id="2049" class="Symbol">}</a>    <a id="2054" class="Symbol">=</a> <a id="2056" href="Definition.Modality.Context.html#567" class="InductiveConstructor">ε</a>
<a id="2058" href="Definition.Modality.Context.html#2028" class="Function">𝟙ᶜ</a> <a id="2061" class="Symbol">{</a><a id="2062" class="Argument">n</a> <a id="2064" class="Symbol">=</a> <a id="2066" href="Tools.Nat.html#365" class="InductiveConstructor">1+</a> <a id="2069" href="Definition.Modality.Context.html#2069" class="Bound">n</a><a id="2070" class="Symbol">}</a> <a id="2072" class="Symbol">=</a> <a id="2074" href="Definition.Modality.Context.html#2028" class="Function">𝟙ᶜ</a> <a id="2077" href="Definition.Modality.Context.html#582" class="InductiveConstructor Operator">∙</a> <a id="2079" href="Definition.Modality.html#697" class="Field">𝟙</a>
</pre></body></html>